<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with eegUtils • eegUtils</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">eegUtils</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/eegUtils-intro.html">Getting started with eegUtils</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/craddm/eegUtils">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting started with eegUtils</h1>
                        <h4 class="author">Matt Craddock</h4>
            
            <h4 class="date">2018-02-26</h4>
          </div>

    
    
<div class="contents">
<p><code>eegUtils</code> is a package for performing basic EEG preprocessing and plotting of EEG data. Many of these functions are wrappers around existing R functions to make them behave in consistent ways and produce output that is more amenable to many of the subsequent steps in EEG analysis.</p>
<p>The package implements custom objects to contain EEG data and associated metadata. Some of its functions depend on data being stored in this format, but part of the philosophy of the package is that any object stored in the custom <code>eeg_data</code> and associated formats will always be convertible to a standard <code>data.frame</code> or <code>tibble</code> for subsequent use in whatever way the user desires. Plotting functions will typically work on both <code>eeg_data</code> objects and standard formats, while more complex processing functions will require <code>eeg_data</code> format.</p>
<div id="basic-eeg-preprocessing" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-eeg-preprocessing" class="anchor"></a>Basic EEG preprocessing</h2>
<p>There is currently suport for loading raw data in the .BDF (typically BioSemi) and .CNT (32-bit; associated with Neuroscan) file formats using the <code><a href="../reference/import_raw.html">import_raw()</a></code> command. Loading data in these formats in results in an <code>eeg_data</code> object - a structure that contains the raw data and a variety of metadata.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(eegUtils)
eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/import_raw.html">import_raw</a></span>(<span class="st">"C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">Matt</span><span class="ch">\\</span><span class="st">Dropbox</span><span class="ch">\\</span><span class="st">BlogStuff</span><span class="ch">\\</span><span class="st">EEG_data</span><span class="ch">\\</span><span class="st">S123ExteroSSDTB1.bdf"</span>)
<span class="kw">names</span>(eeg_data)
<span class="co">#&gt; [1] "signals"    "srate"      "events"     "chan_info"  "timings"   </span>
<span class="co">#&gt; [6] "continuous" "reference"</span>
eeg_data<span class="op">$</span>srate
<span class="co">#&gt; [1] 1024</span></code></pre></div>
<p>The data itself is stored in the <code>signals</code> data frame; the timing of events is stored in the <code>events</code> data frame, timings for each sample are stored in the <code>timings</code> data frame. Times are stored in samples and seconds.</p>
<p>A common first step would be to rereference the data, which can be done using the <code><a href="../reference/reref_eeg.html">reref_eeg()</a></code> command. By default, if no electrodes are specified, the data will be referenced to a common average. The median rather than the mean can be used by specifiying <code>robust == TRUE</code>. Electrodes can also be excluded from the average reference calculation; they will nevertheless still be referenced to the same reference as the other channels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/reref_eeg.html">reref_eeg</a></span>(eeg_data, <span class="dt">ref_chans =</span> <span class="st">"average"</span>)
eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/reref_eeg.html">reref_eeg</a></span>(eeg_data, <span class="dt">ref_chans =</span> <span class="st">"average"</span>, <span class="dt">robust =</span> <span class="ot">TRUE</span>)
eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/reref_eeg.html">reref_eeg</a></span>(eeg_data, <span class="dt">ref_chans =</span> <span class="st">"average"</span>,
                      <span class="dt">exclude =</span> <span class="kw">c</span>(<span class="st">"EXG7"</span>, <span class="st">"EXG8"</span>), <span class="dt">robust =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>EEGLAB can be loaded using the <code><a href="../reference/load_set.html">load_set()</a></code> command. The command detects whether the data is epoched or not and, by default, arranges the data in the <code>eeg_data</code> format.</p>
<p>Filtering can be performed using the <code><a href="../reference/iir_filt.html">iir_filt()</a></code> command. This use a Butterworth filter to perform low-, high-, or band-pass or band-stop filtering of user-specified frequencies. Filtering is run twice (once forwards, once in reverse) to achieve zero-phase. (FIR filtering is currently in development, but could be performed using the <code>signal</code> package).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/iir_filt.html">iir_filt</a></span>(eeg_data, <span class="dt">low_freq =</span> <span class="dv">1</span>, <span class="dt">high_freq =</span> <span class="dv">40</span>, <span class="dt">filter_order =</span> <span class="dv">3</span>) <span class="co">#specify a bandpass filter</span>
<span class="co">#&gt; Band-pass IIR filter from 1-40 Hz</span></code></pre></div>
<p>Data can be epoched around events/triggers using <code><a href="../reference/epoch_data.html">epoch_data()</a></code>, which outputs an <code>eeg_epochs</code> object. A list of the event triggers found in the data can be retrieved using <code><a href="../reference/list_events.html">list_events()</a></code>. In this case we’ll epoch around events 100 and 128.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/list_events.html">list_events</a></span>(eeg_data)
<span class="co">#&gt;    event_type</span>
<span class="co">#&gt; 1         253</span>
<span class="co">#&gt; 2          16</span>
<span class="co">#&gt; 3         100</span>
<span class="co">#&gt; 4           1</span>
<span class="co">#&gt; 5          14</span>
<span class="co">#&gt; 6          12</span>
<span class="co">#&gt; 7         128</span>
<span class="co">#&gt; 8           4</span>
<span class="co">#&gt; 9           2</span>
<span class="co">#&gt; 10         10</span>
<span class="co">#&gt; 11          3</span>
eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/epoch_data.html">epoch_data</a></span>(eeg_data, <span class="dt">events =</span> <span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">128</span>), <span class="dt">time_lim =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">5</span>, .<span class="dv">75</span>))</code></pre></div>
<p><code>eeg_epochs</code> can then be plotted using <code><a href="../reference/plot_butterfly.html">plot_butterfly()</a></code> or <code><a href="../reference/plot_timecourse.html">plot_timecourse()</a></code>. Both <code><a href="../reference/plot_butterfly.html">plot_butterfly()</a></code> and <code><a href="../reference/plot_timecourse.html">plot_timecourse()</a></code> average over epochs. <code><a href="../reference/plot_timecourse.html">plot_timecourse()</a></code> will also average over electrodes - all electrodes if none are specified, or over any specified electrodes. Baseline correction can also be applied at this point if desired. Baseline correction can also be applied using <code><a href="../reference/rm_baseline.html">rm_baseline()</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_butterfly.html">plot_butterfly</a></span>(eeg_data, <span class="dt">time_lim =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">2</span>, .<span class="dv">5</span>), <span class="dt">legend =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="eegUtils-intro_files/figure-html/plot_epochs-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_timecourse.html">plot_timecourse</a></span>(eeg_data, <span class="dt">time_lim =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">2</span>, .<span class="dv">5</span>), <span class="dt">baseline =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">electrode =</span> <span class="st">"POz"</span>)</code></pre></div>
<p><img src="eegUtils-intro_files/figure-html/plot_epochs-2.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/plot_timecourse.html">plot_timecourse</a></span>(eeg_data, <span class="dt">time_lim =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">2</span>, .<span class="dv">5</span>), <span class="dt">baseline =</span> <span class="kw">c</span>(<span class="op">-</span>.<span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">electrode =</span> <span class="st">"C4"</span>)</code></pre></div>
<p><img src="eegUtils-intro_files/figure-html/plot_epochs-3.png" width="672"></p>
<p>Channel locations can be added using the <code><a href="../reference/electrode_locations.html">electrode_locations()</a></code> command. Currently this only has locations for a limited number of electrodes (64 electrodes from the 10-20 system). <code><a href="../reference/topoplot.html">topoplot()</a></code> can then be used to plot topographical representation of selected data. Note that it is not compulsory to use locations from <code><a href="../reference/electrode_locations.html">electrode_locations()</a></code>; if the data has x and y columns</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eeg_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/electrode_locations.html">electrode_locations</a></span>(eeg_data)
<span class="co">#&gt; Electrodes not found: EXG1 EXG2 EXG3 EXG4 EXG5 EXG6 EXG7 EXG8</span>
<span class="co">#&gt; </span>
<span class="kw"><a href="../reference/topoplot.html">topoplot</a></span>(eeg_data, <span class="dt">time_lim =</span> <span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>))
<span class="co">#&gt; Electrodes not found: EXG1EXG2EXG3EXG4EXG5EXG6EXG7EXG8</span>
<span class="co">#&gt; Attempting to add standard electrode locations...</span></code></pre></div>
<p><img src="eegUtils-intro_files/figure-html/unnamed-chunk-1-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/topoplot.html">topoplot</a></span>(eeg_data, <span class="dt">time_lim =</span> <span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>), <span class="dt">palette=</span> <span class="st">"magma"</span>)
<span class="co">#&gt; Electrodes not found: EXG1EXG2EXG3EXG4EXG5EXG6EXG7EXG8</span>
<span class="co">#&gt; Attempting to add standard electrode locations...</span></code></pre></div>
<p><img src="eegUtils-intro_files/figure-html/unnamed-chunk-1-2.png" width="672"></p>
</div>
<div id="planned-features" class="section level2">
<h2 class="hasAnchor">
<a href="#planned-features" class="anchor"></a>Planned features</h2>
<ul>
<li>(Time-)Frequency analysis</li>
<li>Artefact rejection algorithms</li>
<li>ICA</li>
<li>Statistical analysis frameworks (e.g. spatio-temporal clustering)</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#basic-eeg-preprocessing">Basic EEG preprocessing</a></li>
      <li><a href="#planned-features">Planned features</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matt Craddock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
